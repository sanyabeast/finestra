/* @sanyabeast | 2019 */
var e,t;e=window,t=function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"injectCSS",value:function(e,t){document.querySelector("#telechart-css-".concat(e))?document.querySelector("#telechart-css-".concat(e)).textContent=t:document.querySelector("head").appendChild(this.parseHTML('<style id="telechart-css-'.concat(e,'" type="text/css">').concat(t,"</style>")))}},{key:"loopCollection",value:function(e,t){if(e)if(Array.isArray(e)||"number"==typeof e.length)for(var n=0,o=e.length;n<o&&!t(e[n],n,e);n++);else for(var i in e)if(t(e[i],i,e))break}},{key:"loop",value:function(e,t,n,o,i){if(o)for(var r=e,a=0;r<t&&!i(r,a);r+=n)a++;else for(r=e,a=0;r<=t&&!i(r,a);r+=n)a++}},{key:"generateRandomString",value:function(e,t){for(var n="";n.length<t;)n+=Math.random().toString(32).substring(3,12);return n=n.substring(0,t),"".concat(e,"-").concat(n)}},{key:"parseHTML",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}(),r='<div class="finestra frame">\r\n\t<div class="header">\r\n\t\t<div class="caption">\r\n\t\t\t<p></p>\r\n\t\t</div>\r\n\t\t<div class="frame-controls">\r\n\t\t\t<div class="button close">\r\n\t\t\t\t<p class="material-icons">close</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="custom-controls"></div>\r\n\t<div class="body">\r\n\t</div>\t\r\n\t<div class="resizer"></div>\r\n</div>';function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={name:t.name,translation:{x:0,y:0},size:{x:300,y:300},callbacks:{onCreate:t.onCreate,onResize:t.onResize,onMove:t.onMove,onClose:t.onClose,onFocus:t.onFocus},id:t.id},this.dom=i.parseHTML(r),this.dom.querySelector(".header .caption p").innerHTML=this.state.name,this.dom.addEventListener("click",this.state.callbacks.onFocus||function(){}),this.$setupFocusing(),this.$setupDragging(),this.$setupResizing(),this.$setupButtons(),t.position&&this.setPosition(t.position.x,t.position.y),t.size&&this.setSize(t.size.x,t.size.y),document.body.appendChild(this.dom),this.state.callbacks.onCreate(this)}return s(e,[{key:"UUID",get:function(){return this.state.id}},{key:"bodyElement",get:function(){return this.dom.querySelector(".body")}}]),s(e,[{key:"setBodyContent",value:function(e){this.dom.querySelector(".body").innerHTML="",this.dom.querySelector(".body").appendChild(e)}},{key:"$setupFocusing",value:function(){}},{key:"$setupDragging",value:function(){var e=this.dom.querySelector(".header"),t={captured:!1,x:0,y:0};e.addEventListener("mousedown",function(e){t.x=e.pageX,t.y=e.pageY,t.captured=!0}.bind(this)),window.addEventListener("mouseup",function(e){t.x=e.pageX,t.y=e.pageY,t.captured=!1}.bind(this)),window.addEventListener("mousemove",function(e){if(t.captured){var n=e.pageX-t.x,o=e.pageY-t.y;t.x=e.pageX,t.y=e.pageY,this.setPosition(this.state.translation.x+n,this.state.translation.y+o)}}.bind(this))}},{key:"$setupResizing",value:function(){var e=this.dom.querySelector(".resizer"),t={captured:!1,x:0,y:0};e.addEventListener("mousedown",function(e){t.x=e.pageX,t.y=e.pageY,t.captured=!0}.bind(this)),window.addEventListener("mouseup",function(e){t.x=e.pageX,t.y=e.pageY,t.captured=!1}.bind(this)),window.addEventListener("mousemove",function(e){if(t.captured){var n=e.pageX-t.x,o=e.pageY-t.y;t.x=e.pageX,t.y=e.pageY,this.setSize(this.state.size.x+n,this.state.size.y+o),this.state.callbacks.onResize&&this.state.callbacks.onResize(this.state.size)}}.bind(this))}},{key:"$setupButtons",value:function(){this.dom.querySelector(".header .frame-controls .button.close").addEventListener("click",this.state.callbacks.onClose||function(){})}},{key:"setPosition",value:function(e,t){this.state.translation.x=e,this.state.translation.y=t,this.dom.style.transform=["translate3d(",e,"px, ",t,"px, 0px)"].join("")}},{key:"setSize",value:function(e,t){this.state.size.x=e,this.state.size.y=t,this.dom.style.width=e+"px",this.dom.style.height=t+"px"}},{key:"addCustomButton",value:function(e,t,n){var o=document.createElement("div");o.innerHTML='<div\r\n\tclass="finestra button custom-button"\r\n>\r\n\t<p\r\n\t\tclass="material-icons"\r\n\t><p>\r\n</div>';var i=o.children[0];i.querySelector("p").innerHTML=e,t.onClick&&i.addEventListener("click",t.onClick),t.onOver&&i.addEventListener("mouseover",t.onOver),t.onOut&&i.addEventListener("mouseout",t.onOut),n&&i.setAttribute("title",n),this.dom.querySelector(".custom-controls").appendChild(i)}},{key:"close",value:function(){this.dom.remove()}},{key:"setZIndex",value:function(e){this.dom.style.zIndex=e||""}},{key:"makeStatic",value:function(e){e?this.dom.classList.add("static"):this.dom.classList.remove("static")}}]),e}();function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i.injectCSS("finestra","/* fallback */\n@font-face {\n  font-family: 'Material Icons';\n  font-style: normal;\n  font-weight: 400;\n  src: url(https://fonts.gstatic.com/s/materialicons/v46/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2) format(\"woff2\"); }\n\n.material-icons {\n  font-family: 'Material Icons';\n  font-weight: normal;\n  font-style: normal;\n  font-size: 14px;\n  line-height: 1;\n  letter-spacing: normal;\n  text-transform: none;\n  display: inline-block;\n  white-space: nowrap;\n  word-wrap: normal;\n  direction: ltr;\n  -webkit-font-feature-settings: 'liga';\n  -webkit-font-smoothing: antialiased;\n  opacity: 0.666;\n  transition: opacity 0.2s ease-in;\n  font-weight: 900; }\n\n.finestra.frame {\n  position: absolute;\n  left: 0;\n  top: 0;\n  user-select: none;\n  background: #ffffff;\n  border: 2px solid #000000;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch; }\n  .finestra.frame > .header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 16px;\n    background-color: #f0f0f0;\n    cursor: move; }\n    .finestra.frame > .header .caption p {\n      margin: 0; }\n    .finestra.frame > .header .button p {\n      margin: 0;\n      cursor: pointer; }\n  .finestra.frame > .custom-controls {\n    padding: 8px 16px;\n    background-color: #e8e8e8; }\n    .finestra.frame > .custom-controls .button p {\n      margin: 0;\n      cursor: pointer; }\n  .finestra.frame > .resizer {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background: white;\n    position: absolute;\n    right: -6px;\n    bottom: -6px;\n    transform: translate(50%, 50%);\n    cursor: nw-resize;\n    z-index: 1;\n    border: 1px solid black; }\n");var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content={}}var t,n,o;return t=e,(n=[{key:"create",value:function(t){return(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){l(e,t,n[t])})}return e}({},e.defaultFrameParams,t)).id=t.id||i.generateRandomString("frame",16),t.name=t.name||t.id,this.content[t.id]=new c(t),this.content[t.id]}},{key:"remove",value:function(e){var t=this.content[e];delete this.content[e],t.close()}},{key:"setFocus",value:function(e){for(var t in this.content)t==e?this.content[t].setZIndex(99999):this.content[t].setZIndex(1)}},{key:"makeStatic",value:function(e){for(var t in this.content)this.content[t].makeStatic(e)}}])&&u(t.prototype,n),o&&u(t,o),e}();l(d,"Utils",i),l(d,"defaultFrameParams",{position:{x:0,y:0},size:{x:300,y:300}});t.default=d}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Finestra=t():e.Finestra=t();