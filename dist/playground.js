/* @sanyabeast | 2019 */
var t,e;t=window,e=function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.r(e);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"injectCSS",value:function(t,e){document.querySelector("#telechart-css-".concat(t))?document.querySelector("#telechart-css-".concat(t)).textContent=e:document.querySelector("head").appendChild(this.parseHTML('<style id="telechart-css-'.concat(t,'" type="text/css">').concat(e,"</style>")))}},{key:"loopCollection",value:function(t,e){if(t)if(Array.isArray(t)||"number"==typeof t.length)for(var n=0,o=t.length;n<o&&!e(t[n],n,t);n++);else for(var i in t)if(e(t[i],i,t))break}},{key:"loop",value:function(t,e,n,o,i){if(o)for(var r=t,a=0;r<e&&!i(r,a);r+=n)a++;else for(r=t,a=0;r<=e&&!i(r,a);r+=n)a++}},{key:"generateRandomString",value:function(t,e){for(var n="";n.length<e;)n+=Math.random().toString(32).substring(3,12);return n=n.substring(0,e),"".concat(t,"-").concat(n)}},{key:"parseHTML",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}}],(n=null)&&o(e.prototype,n),i&&o(e,i),t}(),r='<div class="finestra frame">\r\n\t<div class="header">\r\n\t\t<div class="caption">\r\n\t\t\t<p></p>\r\n\t\t</div>\r\n\t\t<div class="frame-controls">\r\n\t\t\t<div class="button close">\r\n\t\t\t\t<p class="material-icons">close</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="custom-controls"></div>\r\n\t<div class="body">\r\n\t</div>\t\r\n\t<div class="resizer"></div>\r\n</div>';function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={name:e.name,translation:{x:0,y:0},size:{x:300,y:300},callbacks:{onCreate:e.onCreate,onResize:e.onResize,onMove:e.onMove,onClose:e.onClose,onFocus:e.onFocus},id:e.id},this.dom=i.parseHTML(r),this.dom.querySelector(".header .caption p").innerHTML=this.state.name,this.dom.addEventListener("click",this.state.callbacks.onFocus||function(){}),this.$setupFocusing(),this.$setupDragging(),this.$setupResizing(),this.$setupButtons(),e.position&&this.setPosition(e.position.x,e.position.y),e.size&&this.setSize(e.size.x,e.size.y),document.body.appendChild(this.dom),this.state.callbacks.onCreate(this)}return s(t,[{key:"UUID",get:function(){return this.state.id}},{key:"bodyElement",get:function(){return this.dom.querySelector(".body")}}]),s(t,[{key:"setBodyContent",value:function(t){this.dom.querySelector(".body").innerHTML="",this.dom.querySelector(".body").appendChild(t)}},{key:"$setupFocusing",value:function(){}},{key:"$setupDragging",value:function(){var t=this.dom.querySelector(".header"),e={captured:!1,x:0,y:0};t.addEventListener("mousedown",function(t){e.x=t.pageX,e.y=t.pageY,e.captured=!0}.bind(this)),window.addEventListener("mouseup",function(t){e.x=t.pageX,e.y=t.pageY,e.captured=!1}.bind(this)),window.addEventListener("mousemove",function(t){if(e.captured){var n=t.pageX-e.x,o=t.pageY-e.y;e.x=t.pageX,e.y=t.pageY,this.setPosition(this.state.translation.x+n,this.state.translation.y+o)}}.bind(this))}},{key:"$setupResizing",value:function(){var t=this.dom.querySelector(".resizer"),e={captured:!1,x:0,y:0};t.addEventListener("mousedown",function(t){e.x=t.pageX,e.y=t.pageY,e.captured=!0}.bind(this)),window.addEventListener("mouseup",function(t){e.x=t.pageX,e.y=t.pageY,e.captured=!1}.bind(this)),window.addEventListener("mousemove",function(t){if(e.captured){var n=t.pageX-e.x,o=t.pageY-e.y;e.x=t.pageX,e.y=t.pageY,this.setSize(this.state.size.x+n,this.state.size.y+o),this.state.callbacks.onResize&&this.state.callbacks.onResize(this.state.size)}}.bind(this))}},{key:"$setupButtons",value:function(){this.dom.querySelector(".header .frame-controls .button.close").addEventListener("click",this.state.callbacks.onClose||function(){})}},{key:"setPosition",value:function(t,e){this.state.translation.x=t,this.state.translation.y=e,this.dom.style.transform=["translate3d(",t,"px, ",e,"px, 0px)"].join("")}},{key:"setSize",value:function(t,e){this.state.size.x=t,this.state.size.y=e,this.dom.style.width=t+"px",this.dom.style.height=e+"px"}},{key:"addCustomButton",value:function(t,e,n){var o=document.createElement("div");o.innerHTML='<div\r\n\tclass="finestra button custom-button"\r\n>\r\n\t<p\r\n\t\tclass="material-icons"\r\n\t><p>\r\n</div>';var i=o.children[0];i.querySelector("p").innerHTML=t,e.onClick&&i.addEventListener("click",e.onClick),e.onOver&&i.addEventListener("mouseover",e.onOver),e.onOut&&i.addEventListener("mouseout",e.onOut),n&&i.setAttribute("title",n),this.dom.querySelector(".custom-controls").appendChild(i)}},{key:"close",value:function(){this.dom.remove()}},{key:"setZIndex",value:function(t){this.dom.style.zIndex=t||""}},{key:"makeStatic",value:function(t){t?this.dom.classList.add("static"):this.dom.classList.remove("static")}}]),t}();function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}i.injectCSS("finestra","/* fallback */\n@font-face {\n  font-family: 'Material Icons';\n  font-style: normal;\n  font-weight: 400;\n  src: url(https://fonts.gstatic.com/s/materialicons/v46/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2) format(\"woff2\"); }\n\n.material-icons {\n  font-family: 'Material Icons';\n  font-weight: normal;\n  font-style: normal;\n  font-size: 14px;\n  line-height: 1;\n  letter-spacing: normal;\n  text-transform: none;\n  display: inline-block;\n  white-space: nowrap;\n  word-wrap: normal;\n  direction: ltr;\n  -webkit-font-feature-settings: 'liga';\n  -webkit-font-smoothing: antialiased;\n  opacity: 0.666;\n  transition: opacity 0.2s ease-in;\n  font-weight: 900; }\n\n.finestra.frame {\n  position: absolute;\n  left: 0;\n  top: 0;\n  user-select: none;\n  background: #ffffff;\n  border: 2px solid #000000;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch; }\n  .finestra.frame > .header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 16px;\n    background-color: #f0f0f0;\n    cursor: move; }\n    .finestra.frame > .header .caption p {\n      margin: 0; }\n    .finestra.frame > .header .button p {\n      margin: 0;\n      cursor: pointer; }\n  .finestra.frame > .custom-controls {\n    padding: 8px 16px;\n    background-color: #e8e8e8; }\n    .finestra.frame > .custom-controls .button p {\n      margin: 0;\n      cursor: pointer; }\n  .finestra.frame > .resizer {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background: white;\n    position: absolute;\n    right: -6px;\n    bottom: -6px;\n    transform: translate(50%, 50%);\n    cursor: nw-resize;\n    z-index: 1;\n    border: 1px solid black; }\n");var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.content={}}var e,n,o;return e=t,(n=[{key:"create",value:function(e){return(e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){l(t,e,n[e])})}return t}({},t.defaultFrameParams,e)).id=e.id||i.generateRandomString("frame",16),e.name=e.name||e.id,this.content[e.id]=new c(e),this.content[e.id]}},{key:"remove",value:function(t){var e=this.content[t];delete this.content[t],e.close()}},{key:"setFocus",value:function(t){for(var e in this.content)e==t?this.content[e].setZIndex(99999):this.content[e].setZIndex(1)}},{key:"makeStatic",value:function(t){for(var e in this.content)this.content[e].makeStatic(t)}}])&&u(e.prototype,n),o&&u(e,o),t}();l(d,"Utils",i),l(d,"defaultFrameParams",{position:{x:0,y:0},size:{x:300,y:300}});e.default=d},function(t,e,n){n.r(e);var o=n(0),i=window.finestra=new o.default;o.default.Utils.loop(0,4,1,!0,function(t){i.create({position:{x:t%2*320+20,y:320*Math.floor(t/2)+20},onCreate:function(t){t.setBodyContent(o.default.Utils.parseHTML('\n        \t\t\t<div style="color:#000">'.concat(t.UUID,"</div>\n        \t\t")))}}).addCustomButton("alarm_on",{onClick:function(){alert("Hello!")}},"test")})}])},"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Finestra=e():t.Finestra=e();